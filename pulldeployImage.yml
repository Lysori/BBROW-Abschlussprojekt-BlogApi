---
  - name: start webapp container and deploy to Tomcat
    hosts: localhost
    tasks:
    - name: Create dockernetwork
      docker_network:
        name: bbrow-net
        connected:
          - mysql

    - name: Stop & remove Docker tomcat container
      docker_container:
        force_kill: true
        state: absent
        name: tomcat_bbrow
  
    - name: Create Docker container with tomcat & add to network
      docker_container:
        name: tomcat_bbrow
        image: bbrowneutest:latest
        ports: 
          - 8082:8080
        env:
          MYSQL_HOST: mysql
        links: 
          - mysql
        networks: 
          - name: bbrow-net


