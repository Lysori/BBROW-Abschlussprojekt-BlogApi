---
  - name: Pull the bbrow-blog docker image and deploy it on tomcat
    hosts: localhost
    tasks:
    - name: Stop & remove bbrow-blog container 
      docker_container:
        force_kill: true
        state: absent
        name: tomcat_bbrow
    
    - name: pull docker image from AzureCr.io
      docker_image:
        name: devopsdus2020.azurecr.io/bbrow:v3
        source: pull
  
    - name: Start a new bbrow-blog container
      docker_container:
        name: tomcat_bbrow
        image: bbrowneutest:latest
        ports: 
          - 8080:8080